<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Prévenir Alias lors du déclenchement d&#39;un ou plusieurs évènements (Travail du développeur) | Alias API Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Taguez vos données, respectez le RGPD">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/alias-api-documentation/assets/css/0.styles.505ca651.css" as="style"><link rel="preload" href="/alias-api-documentation/assets/js/app.c7a65cbd.js" as="script"><link rel="preload" href="/alias-api-documentation/assets/js/2.7b8a4189.js" as="script"><link rel="preload" href="/alias-api-documentation/assets/js/18.8a7d51e7.js" as="script"><link rel="prefetch" href="/alias-api-documentation/assets/js/10.843725f2.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/11.d9855d2d.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/12.79712ca6.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/13.38409b13.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/14.ce3199b2.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/15.3df3a12d.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/16.c1a31e91.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/17.e4bb6631.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/19.e5c55afb.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/20.ad2db5c4.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/3.b2c36ace.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/4.2540eb76.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/5.d4477408.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/6.da94c2c2.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/7.930cb612.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/8.92ce57d8.js"><link rel="prefetch" href="/alias-api-documentation/assets/js/9.76abd819.js">
    <link rel="stylesheet" href="/alias-api-documentation/assets/css/0.styles.505ca651.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/alias-api-documentation/" class="home-link router-link-active"><!----> <span class="site-name">Alias API Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/alias-api-documentation/getting-started/introduction.html" class="nav-link">
  Mise en place
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/alias-api-documentation/getting-started/introduction.html" class="nav-link">
  Mise en place
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mise en place</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/alias-api-documentation/getting-started/introduction.html" class="sidebar-link">Alias, c'est quoi ?</a></li><li><a href="/alias-api-documentation/getting-started/steps.html" class="sidebar-link">Quatre étapes pour mettre en route Alias</a></li><li><a href="/alias-api-documentation/getting-started/entering-processing-records.html" class="sidebar-link">Numériser les fiches de traitement (travail du DPO)</a></li><li><a href="/alias-api-documentation/getting-started/declaring-locations.html" class="sidebar-link">Déclarer les localisations des types de données (travail du développeur)</a></li><li><a href="/alias-api-documentation/getting-started/conservation-time.html" class="sidebar-link">Paramétrer les durées de conservation (Travail du DPO)</a></li><li><a href="/alias-api-documentation/getting-started/setup-events-dev.html" aria-current="page" class="active sidebar-link">Prévenir Alias lors du déclenchement d'un ou plusieurs évènements (Travail du développeur)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/alias-api-documentation/developers/event-system" class="sidebar-heading clickable"><span>Alias for developers</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/alias-api-documentation/developers/sanitizing-data-history.html" class="sidebar-link">Rendre vos anciennes données RGPD compatibles</a></li><li><a href="/alias-api-documentation/developers/handle-consents.html" class="sidebar-link">Gérer les consentements</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/alias-api-documentation/dpo/events" class="sidebar-heading clickable"><span>Alias for DPO</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/alias-api-documentation/dpo/processing-records.html" class="sidebar-link">Fiche de traitement</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="prevenir-alias-lors-du-declenchement-d-un-ou-plusieurs-evenements-travail-du-developpeur"><a href="#prevenir-alias-lors-du-declenchement-d-un-ou-plusieurs-evenements-travail-du-developpeur" class="header-anchor">#</a> Prévenir Alias lors du déclenchement d'un ou plusieurs évènements (Travail du développeur)</h1> <p>Consultez votre boite mail, vous venez de recevoir un message de la part de votre DPO. Il a terminé de remplir les règles de durée de conservation et définit les évènements susceptibles de modifier le contexte légal qui s'applique aux données enregistrées dans vos systèmes.</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sign up d'un nouvel utilisateur sur notre site exemple.com&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user_created&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;instance_creator&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Login d'un nouvel utilisateur sur notre site exemple.com&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;instance_creator&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ouverture d'une newsletter du site exemple.com par un abonné à cette newsletter&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;newsletter_opening&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;instance_creator&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Création d'une facture suite à un achat sur le site exemple.com&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;invoice_created&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;instance_creator&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>La clé <code>instance_creator</code> signifie que vous pouvez gérer différement la notification de cet évènement à Alias en fonction de sa valeur.</p> <p>Dans le cas où un évènement est &quot;créateur d'instance&quot;, chaque occurence de cet évènement dans vos systèmes devra être notifié à Alias (ex: si plusieurs factures sont créées dans vos systèmes, Alias va devoir associer une durée de conservation à chacune des données de chacune de ces factures.). Dans le cas inverse, seule l'occurence la plus récente de l'évènement peut être notifiée à Alias (ex: si un utilisateur se connecte, cela implique une mise à jour des durées de conservation de plusieurs de ses données mais n'implique pas la création de nouvelles données personnelles à traquer par Alias).</p> <p>Il vous faut maintenant intégrer ces évènements dans vos systèmes afin d'être en mesure de prévenir Alias lorsqu'ils surviennent.</p> <p>La solution la plus simple est de mettre en place de simples CRON Jobs capables de repérer les utilisateurs ayant effectué une ou plusieurs des actions référencées par le DPO. Dans le cadre de la création d'un nouvel utilisateur, l'<code>identityRef</code> correspond à un identifiant interne à vos systèmes qui vous permettra de retrouver un utilisateur avec certitude.</p> <p>Cette <code>identityRef</code> peut être créée de toute pièce dans vos systèmes pour Alias, ou bien être un id d'instance de table (par exemple).</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;identityRef&quot;</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        <span class="token property">&quot;events&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// vous n'êtes pas obligé de signaler la survenue de cet évènement à chaque fois qu'il se produit. Simplement la dernière occurence connue à la date de l'envoi de cet objet à Alias.</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;newsletter_opening&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;identityRef&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token property">&quot;events&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;invoice_created&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;invoice_created&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-22T06:10:00Z&quot;</span>
          <span class="token punctuation">}</span> <span class="token comment">// vous devez signaler la survenu de cet évènement autant de fois qu'il s'est produit</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;identityRef&quot;</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
        <span class="token property">&quot;events&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user_created&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Réponse d'Alias:</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;identityRef&quot;</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;dataTypes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prénom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;nom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;locations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;db_xz42/users/first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;db_xz42/users/last_name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;nextState&quot;</span><span class="token operator">:</span> <span class="token string">&quot;archive&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;nextStateDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;identityRef&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;dataTypes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prénom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;nom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;locations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://facture-bucket.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;nextState&quot;</span><span class="token operator">:</span> <span class="token string">&quot;archive&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;ArchiveAllBeforeDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;identityRef&quot;</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
        <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;locations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;db_xz42/users/first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;db_xz42/users/last_name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;nextState&quot;</span><span class="token operator">:</span> <span class="token string">&quot;archive&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;nextStateDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2026-04-22T06:00:00Z&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/alias-api-documentation/getting-started/conservation-time.html" class="prev">
        Paramétrer les durées de conservation (Travail du DPO)
      </a></span> <span class="next"><a href="/alias-api-documentation/developers/sanitizing-data-history.html">
        Rendre vos anciennes données RGPD compatibles
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/alias-api-documentation/assets/js/app.c7a65cbd.js" defer></script><script src="/alias-api-documentation/assets/js/2.7b8a4189.js" defer></script><script src="/alias-api-documentation/assets/js/18.8a7d51e7.js" defer></script>
  </body>
</html>
